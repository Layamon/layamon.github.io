---
layout: post
title: InnoDB源码——全貌
date: 2019-05-17 10:20
header-img: "img/head.jpg"
categories: jekyll update
tags:
  - InnoDB
typora-root-url: ../../yummyliu.github.io
---

* TOC
{:toc}
# OSX下的MySQL5.7调试环境

```bash
mysql57 @5.7.17: error: no type named 'self_ip_exception' in namespace 'boost::geometry::detail::self_get_turn_points'
```

上述错误是本地的boost库版本不是特定的 1.59；将本地boost库'brew uninstall boost'后，重新cmake成功。

`cmake . -DDOWNLOAD_BOOST=1 -DWITH_BOOST=/usr/local/Cellar -DWITH_DEBUG=1`

然后，make、make install；

## 初始化

```bash
#初始化数据目录
/usr/local/mysql/bin/mysqld --initialize --user=liuyangming --basedir=/usr/local/mysql --datadir=/Users/liuyangming/dbdata/mysql/data

> /usr/local/mysql/bin/mysqld --initialize --user=liuyangming --basedir=/usr/local/mysql --datadir=/Users/liuyangming/dbdata/mysql/data
2019-06-11T09:33:36.339696Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2019-06-11T09:33:36.343094Z 0 [Warning] Setting lower_case_table_names=2 because file system for /Users/liuyangming/dbdata/mysql/data/ is case insensitive
2019-06-11T09:33:36.683098Z 0 [Warning] InnoDB: New log files created, LSN=45790
2019-06-11T09:33:36.826801Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
2019-06-11T09:33:36.904487Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: fd159870-8c2b-11e9-a017-4a930459b57e.
2019-06-11T09:33:36.921158Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
2019-06-11T09:33:36.923575Z 1 [Note] A temporary password is generated for root@localhost: ;2nu=q02Beiq

#启动mysql服务
/usr/local/mysql/bin/mysqld_safe --skip-grant-tables  --datadir=/Users/liuyangming/dbdata/mysql/data &

#检查
> bin/mysqladmin version
bin/mysqladmin  Ver 8.42 Distrib 5.7.26, for osx10.14 on x86_64
Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Server version          5.7.26-debug
Protocol version        10
Connection              Localhost via UNIX socket
UNIX socket             /tmp/mysql.sock
Uptime:                 18 sec

Threads: 1  Questions: 4  Slow queries: 0  Opens: 96  Flush tables: 1  Open tables: 91  Queries per second avg: 0.222


#停止MySQL服务
bin/mysqladmin shutdown
```





# Record结构

# Page结构

# Mutex与读写锁的实现

